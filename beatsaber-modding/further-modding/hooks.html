<html>
    <head>

    </head>
    <body>
        <div class="search"><input type="text" placeholder="Search Classes" id="search"><br><br><div id="searchResults"></div></div>

        <div id="classes">

        </div>

        <div id="class">

        </div>

        <style>
            body{
                margin: 0;
                font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            }

            .search{
                position: fixed;
                top: 10px;
                right: 10px; 
                z-index: 1000;
                opacity: 0.5;
                transition: 0.25s;
            }

            .search:hover{
                opacity: 1;
            }

            #search{
                background: black;
                border: none;
                padding: 5px 15px; 
                outline: none;
                color: white; 
                font-size: 15px; 
                float: right;
            }

            .url{
                background: none;
                border: none;
                width: 100%; 
                color: white;
            }

            #searchResults{
                max-height: 500px;
                overflow: auto;
            }

            #classes{
                background: black;
                color: white;
                width: calc(100% - 20px);
                height: calc(50% - 25px);
                border-bottom: 5px solid #fff;
                overflow: auto;
                padding: 10px;
            }

            .className{
                background: black;
                color: white;
                padding: 2px;
            }

            .className:hover{
                background: rgb(70, 70, 70);
                color: white;
            }

            #class{
                background: black;
                color: white;
                width: calc(100% - 20px);
                height: calc(50% - 25px);
                border-top: 5px solid #fff;
                overflow: auto;
                padding: 10px;
            }

            .centerLoad{
                position: fixed;
                top: 25%;
                left: 50%;
                transform: translate(-50%, -50%);
                font-size: 50px;
            }

            .TypeName{
                color: rgb(0, 162, 255);
                font-style: italic;
            }

            .StaticName{
                color: #7100f1;
            }

            .IncludeName{
                color: rgb(231, 0, 0);
            }

            .strText{
                color: rgb(0, 255, 0);
            }

            .nameSpaceType{
                color: rgb(255, 255, 153);
                text-decoration: underline;
            }

            .comment{
                color: gray; 
            }
        </style>

        <script>
            let classes = document.getElementById('classes');
            let search = document.getElementById('search');
            let options = {
                tabSpacing: 2
            }

            let hookList = [];

            search.onchange = (e) => {
                let resultsDiv = document.getElementById('searchResults');

                if(search.value === ""){
                    resultsDiv.innerHTML = ""
                } else{
                    let results = hookList.filter(x => x.toLowerCase().includes(search.value.toLowerCase()));

                    let text = ''
                    results.forEach(x => {
                        text += '<div class="className"" onclick="loadClass(\''+x+'\')">'+x+'</div>'
                    })

                    resultsDiv.innerHTML = text
                }
            }

            let main = async () => {
                classes.innerHTML = '<div class="centerLoad">Loading... (Fetching Data)</div>'
                let data = await fetch('https://docs.phazed.xyz/beatsaber-modding/further-modding/classList.json');
                console.log('Got Class Data')

                classes.innerHTML = '<div class="centerLoad">Loading... (Parsing JSON)</div>'
                let json = await data.json();
                console.log('Parsed JSON');
                classes.innerHTML = ''

                hookList = json;

                let text = ''
                json.forEach(name => {
                    text += '<div class="className" onclick="loadClass(\''+name+'\')">'+name+'</div>'
                })

                classes.innerHTML = text
            }

            let loadCodegenFile = ( namespace, className, back ) => {
                let url = 'https://raw.githubusercontent.com/sc2ad/BeatSaber-Quest-Codegen/master/include/'+namespace+'/'+className+'.hpp';

                fetch(url).then(res => res.text()).then(data => {
                    let text = '';

                    data.split('\r\n').forEach(name => {
                        name = name.split('<').join('&#60;');
                        name = name.split('>').join('&#62;');

                        if(name.trim().startsWith('//')){
                            let tabs = ''
                            for (let index = 0; index <options.tabSpacing / 2; index++) {
                                tabs += '&nbsp;'
                            }

                            name = name.split(' ').join(tabs);
                            text += '<div class="className"><span class="comment">'+name+'</span></div>'
                        } else{
                            let tabs = ''
                            for (let index = 0; index <options.tabSpacing / 2; index++) {
                                tabs += '&nbsp;'
                            }

                            let intext = false;
                            let newText = '';
                            name = name.split(' ').join(tabs);

                            name.split('').forEach(char => {
                                if(char === '"'){
                                    if(intext === true){
                                        intext = false;
                                        newText += char+'</span>'
                                    } else{
                                        intext = true;
                                        newText += '<span class="strText">'+char
                                    }
                                } else{
                                    newText += char
                                }
                            })

                            name = newText;

                            name = name.split('int&nbsp;').join('<span class="TypeName">int </span>');
                            name = name.split('void&nbsp;').join('<span class="TypeName">void </span>');
                            name = name.split('float&nbsp;').join('<span class="TypeName">float </span>');
                            name = name.split('double&nbsp;').join('<span class="TypeName">double </span>');
                            name = name.split('char&nbsp;').join('<span class="TypeName">char </span>');

                            if(name.includes('UnityEngine::')){
                                let words = name.split('&nbsp;');

                                words.forEach((word, i) => {
                                    if(word.startsWith('UnityEngine::')){
                                        words[i] = '<span class="nameSpaceType">' + word + '</span>'
                                        
                                    }
                                })

                                name = words.join('&nbsp;');
                            }

                            name = name.split('static&nbsp;').join('<span class="StaticName">static </span>');
                            name = name.split('#include&nbsp;').join('<span class="IncludeName">#include </span>');

                            text += '<div class="className">'+name+'</div>'
                        }
                    });

                    document.getElementById('class').innerHTML = '<h1>'+namespace+'::'+className+'</h1><span onclick="loadClass(\''+back+'\')" style="text-decoration: underline;">Back</span><br>'+text
                })
            }

            let loadClass = ( className ) => {
                let url = 'https://docs.phazed.xyz/beatsaber-modding/further-modding/hooks/'+className+'.html';

                fetch(url).then(res => res.text()).then(data => {
                    let text = '';

                    data.split('<br>').forEach(name => {
                        name = name.split('int').join('<span class="int TypeName">int </span>');
                        name = name.split('void').join('<span class="void TypeName">void </span>');
                        name = name.split('float').join('<span class="float TypeName">float </span>');
                        name = name.split('double').join('<span class="double TypeName">double </span>');
                        name = name.split('char').join('<span class="char TypeName">char </span>');

                        if(name.startsWith('Assets')){
                            let words = name.split(' ');
                            let name1 = words[0].split('::');

                            words[0] = '<span class="nameSpaceType" onclick="loadCodegenFile(\''+name1[0]+'\', \''+name1[1]+'\', \''+className+'\')">' + words[0] + '</span>'
                            text += '<div class="className">'+words.join(' ')+'</div>';
                        } else if(name.startsWith('BeatSaberAPI')){
                            let words = name.split(' ');
                            let name1 = words[0].split('::');

                            words[0] = '<span class="nameSpaceType" onclick="loadCodegenFile(\''+name1[0]+'\', \''+name1[1]+'\', \''+className+'\')">' + words[0] + '</span>'
                            text += '<div class="className">'+words.join(' ')+'</div>';
                        } else if(name.startsWith('DataModels')){
                            let words = name.split(' ');
                            let name1 = words[0].split('::');

                            words[0] = '<span class="nameSpaceType" onclick="loadCodegenFile(\''+name1[0]+'\', \''+name1[1]+'\', \''+className+'\')">' + words[0] + '</span>'
                            text += '<div class="className">'+words.join(' ')+'</div>';
                        } else if(name.startsWith('GlobalNamespace')){
                            let words = name.split(' ');
                            let name1 = words[0].split('::');

                            words[0] = '<span class="nameSpaceType" onclick="loadCodegenFile(\''+name1[0]+'\', \''+name1[1]+'\', \''+className+'\')">' + words[0] + '</span>'
                            text += '<div class="className">'+words.join(' ')+'</div>';
                        } else if(name.startsWith('HMUI')){
                            let words = name.split(' ');
                            let name1 = words[0].split('::');

                            words[0] = '<span class="nameSpaceType" onclick="loadCodegenFile(\''+name1[0]+'\', \''+name1[1]+'\', \''+className+'\')">' + words[0] + '</span>'
                            text += '<div class="className">'+words.join(' ')+'</div>';
                        } else if(name.startsWith('Il2CppInspector')){
                            let words = name.split(' ');
                            let name1 = words[0].split('::');

                            words[0] = '<span class="nameSpaceType" onclick="loadCodegenFile(\''+name1[0]+'\', \''+name1[1]+'\', \''+className+'\')">' + words[0] + '</span>'
                            text += '<div class="className">'+words.join(' ')+'</div>';
                        } else if(name.startsWith('JetBrains')){
                            let words = name.split(' ');
                            let name1 = words[0].split('::');

                            words[0] = '<span class="nameSpaceType" onclick="loadCodegenFile(\''+name1[0]+'\', \''+name1[1]+'\', \''+className+'\')">' + words[0] + '</span>'
                            text += '<div class="className">'+words.join(' ')+'</div>';
                        } else if(name.startsWith('LeaderboardsDTO')){
                            let words = name.split(' ');
                            let name1 = words[0].split('::');

                            words[0] = '<span class="nameSpaceType" onclick="loadCodegenFile(\''+name1[0]+'\', \''+name1[1]+'\', \''+className+'\')">' + words[0] + '</span>'
                            text += '<div class="className">'+words.join(' ')+'</div>';
                        } else if(name.startsWith('Libraries')){
                            let words = name.split(' ');
                            let name1 = words[0].split('::');

                            words[0] = '<span class="nameSpaceType" onclick="loadCodegenFile(\''+name1[0]+'\', \''+name1[1]+'\', \''+className+'\')">' + words[0] + '</span>'
                            text += '<div class="className">'+words.join(' ')+'</div>';
                        } else if(name.startsWith('LiteNetLib')){
                            let words = name.split(' ');
                            let name1 = words[0].split('::');

                            words[0] = '<span class="nameSpaceType" onclick="loadCodegenFile(\''+name1[0]+'\', \''+name1[1]+'\', \''+className+'\')">' + words[0] + '</span>'
                            text += '<div class="className">'+words.join(' ')+'</div>';
                        } else if(name.startsWith('LIV')){
                            let words = name.split(' ');
                            let name1 = words[0].split('::');

                            words[0] = '<span class="nameSpaceType" onclick="loadCodegenFile(\''+name1[0]+'\', \''+name1[1]+'\', \''+className+'\')">' + words[0] + '</span>'
                            text += '<div class="className">'+words.join(' ')+'</div>';
                        } else if(name.startsWith('MasterServer')){
                            let words = name.split(' ');
                            let name1 = words[0].split('::');

                            words[0] = '<span class="nameSpaceType" onclick="loadCodegenFile(\''+name1[0]+'\', \''+name1[1]+'\', \''+className+'\')">' + words[0] + '</span>'
                            text += '<div class="className">'+words.join(' ')+'</div>';
                        } else if(name.startsWith('Menu')){
                            let words = name.split(' ');
                            let name1 = words[0].split('::');

                            words[0] = '<span class="nameSpaceType" onclick="loadCodegenFile(\''+name1[0]+'\', \''+name1[1]+'\', \''+className+'\')">' + words[0] + '</span>'
                            text += '<div class="className">'+words.join(' ')+'</div>';
                        } else if(name.startsWith('Microsoft')){
                            let words = name.split(' ');
                            let name1 = words[0].split('::');

                            words[0] = '<span class="nameSpaceType" onclick="loadCodegenFile(\''+name1[0]+'\', \''+name1[1]+'\', \''+className+'\')">' + words[0] + '</span>'
                            text += '<div class="className">'+words.join(' ')+'</div>';
                        } else if(name.startsWith('ModestTree')){
                            let words = name.split(' ');
                            let name1 = words[0].split('::');

                            words[0] = '<span class="nameSpaceType" onclick="loadCodegenFile(\''+name1[0]+'\', \''+name1[1]+'\', \''+className+'\')">' + words[0] + '</span>'
                            text += '<div class="className">'+words.join(' ')+'</div>';
                        } else if(name.startsWith('Mono')){
                            let words = name.split(' ');
                            let name1 = words[0].split('::');

                            words[0] = '<span class="nameSpaceType" onclick="loadCodegenFile(\''+name1[0]+'\', \''+name1[1]+'\', \''+className+'\')">' + words[0] + '</span>'
                            text += '<div class="className">'+words.join(' ')+'</div>';
                        } else if(name.startsWith('NetEase')){
                            let words = name.split(' ');
                            let name1 = words[0].split('::');

                            words[0] = '<span class="nameSpaceType" onclick="loadCodegenFile(\''+name1[0]+'\', \''+name1[1]+'\', \''+className+'\')">' + words[0] + '</span>'
                            text += '<div class="className">'+words.join(' ')+'</div>';
                        } else if(name.startsWith('NUnit')){
                            let words = name.split(' ');
                            let name1 = words[0].split('::');

                            words[0] = '<span class="nameSpaceType" onclick="loadCodegenFile(\''+name1[0]+'\', \''+name1[1]+'\', \''+className+'\')">' + words[0] + '</span>'
                            text += '<div class="className">'+words.join(' ')+'</div>';
                        } else if(name.startsWith('Oculus')){
                            let words = name.split(' ');
                            let name1 = words[0].split('::');

                            words[0] = '<span class="nameSpaceType" onclick="loadCodegenFile(\''+name1[0]+'\', \''+name1[1]+'\', \''+className+'\')">' + words[0] + '</span>'
                            text += '<div class="className">'+words.join(' ')+'</div>';
                        } else if(name.startsWith('OnlineServices')){
                            let words = name.split(' ');
                            let name1 = words[0].split('::');

                            words[0] = '<span class="nameSpaceType" onclick="loadCodegenFile(\''+name1[0]+'\', \''+name1[1]+'\', \''+className+'\')">' + words[0] + '</span>'
                            text += '<div class="className">'+words.join(' ')+'</div>';
                        } else if(name.startsWith('Org')){
                            let words = name.split(' ');
                            let name1 = words[0].split('::');

                            words[0] = '<span class="nameSpaceType" onclick="loadCodegenFile(\''+name1[0]+'\', \''+name1[1]+'\', \''+className+'\')">' + words[0] + '</span>'
                            text += '<div class="className">'+words.join(' ')+'</div>';
                        } else if(name.startsWith('OVR')){
                            let words = name.split(' ');
                            let name1 = words[0].split('::');

                            words[0] = '<span class="nameSpaceType" onclick="loadCodegenFile(\''+name1[0]+'\', \''+name1[1]+'\', \''+className+'\')">' + words[0] + '</span>'
                            text += '<div class="className">'+words.join(' ')+'</div>';
                        } else if(name.startsWith('OVRSimpleJSON')){
                            let words = name.split(' ');
                            let name1 = words[0].split('::');

                            words[0] = '<span class="nameSpaceType" onclick="loadCodegenFile(\''+name1[0]+'\', \''+name1[1]+'\', \''+className+'\')">' + words[0] + '</span>'
                            text += '<div class="className">'+words.join(' ')+'</div>';
                        } else if(name.startsWith('Polyglot')){
                            let words = name.split(' ');
                            let name1 = words[0].split('::');

                            words[0] = '<span class="nameSpaceType" onclick="loadCodegenFile(\''+name1[0]+'\', \''+name1[1]+'\', \''+className+'\')">' + words[0] + '</span>'
                            text += '<div class="className">'+words.join(' ')+'</div>';
                        } else if(name.startsWith('Priority_Queue')){
                            let words = name.split(' ');
                            let name1 = words[0].split('::');

                            words[0] = '<span class="nameSpaceType" onclick="loadCodegenFile(\''+name1[0]+'\', \''+name1[1]+'\', \''+className+'\')">' + words[0] + '</span>'
                            text += '<div class="className">'+words.join(' ')+'</div>';
                        } else if(name.startsWith('RootMotion')){
                            let words = name.split(' ');
                            let name1 = words[0].split('::');

                            words[0] = '<span class="nameSpaceType" onclick="loadCodegenFile(\''+name1[0]+'\', \''+name1[1]+'\', \''+className+'\')">' + words[0] + '</span>'
                            text += '<div class="className">'+words.join(' ')+'</div>';
                        } else if(name.startsWith('SFB')){
                            let words = name.split(' ');
                            let name1 = words[0].split('::');

                            words[0] = '<span class="nameSpaceType" onclick="loadCodegenFile(\''+name1[0]+'\', \''+name1[1]+'\', \''+className+'\')">' + words[0] + '</span>'
                            text += '<div class="className">'+words.join(' ')+'</div>';
                        } else if(name.startsWith('System')){
                            let words = name.split(' ');
                            let name1 = words[0].split('::');

                            words[0] = '<span class="nameSpaceType" onclick="loadCodegenFile(\''+name1[0]+'\', \''+name1[1]+'\', \''+className+'\')">' + words[0] + '</span>'
                            text += '<div class="className">'+words.join(' ')+'</div>';
                        } else if(name.startsWith('TMPro')){
                            let words = name.split(' ');
                            let name1 = words[0].split('::');

                            words[0] = '<span class="nameSpaceType" onclick="loadCodegenFile(\''+name1[0]+'\', \''+name1[1]+'\', \''+className+'\')">' + words[0] + '</span>'
                            text += '<div class="className">'+words.join(' ')+'</div>';
                        } else if(name.startsWith('Tweening')){
                            let words = name.split(' ');
                            let name1 = words[0].split('::');

                            words[0] = '<span class="nameSpaceType" onclick="loadCodegenFile(\''+name1[0]+'\', \''+name1[1]+'\', \''+className+'\')">' + words[0] + '</span>'
                            text += '<div class="className">'+words.join(' ')+'</div>';
                        } else if(name.startsWith('Unity')){
                            let words = name.split(' ');
                            let name1 = words[0].split('::');

                            words[0] = '<span class="nameSpaceType" onclick="loadCodegenFile(\''+name1[0]+'\', \''+name1[1]+'\', \''+className+'\')">' + words[0] + '</span>'
                            text += '<div class="className">'+words.join(' ')+'</div>';
                        } else if(name.startsWith('UnityEngine')){
                            let words = name.split(' ');
                            let name1 = words[0].split('::');

                            words[0] = '<span class="nameSpaceType" onclick="loadCodegenFile(\''+name1[0]+'\', \''+name1[1]+'\', \''+className+'\')">' + words[0] + '</span>'
                            text += '<div class="className">'+words.join(' ')+'</div>';
                        } else if(name.startsWith('UnityEngineInternal')){
                            let words = name.split(' ');
                            let name1 = words[0].split('::');

                            words[0] = '<span class="nameSpaceType" onclick="loadCodegenFile(\''+name1[0]+'\', \''+name1[1]+'\', \''+className+'\')">' + words[0] + '</span>'
                            text += '<div class="className">'+words.join(' ')+'</div>';
                        } else if(name.startsWith('Valve')){
                            let words = name.split(' ');
                            let name1 = words[0].split('::');

                            words[0] = '<span class="nameSpaceType" onclick="loadCodegenFile(\''+name1[0]+'\', \''+name1[1]+'\', \''+className+'\')">' + words[0] + '</span>'
                            text += '<div class="className">'+words.join(' ')+'</div>';
                        } else if(name.startsWith('VRUIControls')){
                            let words = name.split(' ');
                            let name1 = words[0].split('::');

                            words[0] = '<span class="nameSpaceType" onclick="loadCodegenFile(\''+name1[0]+'\', \''+name1[1]+'\', \''+className+'\')">' + words[0] + '</span>'
                            text += '<div class="className">'+words.join(' ')+'</div>';
                        } else if(name.startsWith('Zenject')){
                            let words = name.split(' ');
                            let name1 = words[0].split('::');

                            words[0] = '<span class="nameSpaceType" onclick="loadCodegenFile(\''+name1[0]+'\', \''+name1[1]+'\', \''+className+'\')">' + words[0] + '</span>'
                            text += '<div class="className">'+words.join(' ')+'</div>';
                        } else{
                            text += '<div class="className">'+name+'</div>'
                        }
                    })

                    document.getElementById('class').innerHTML = '<h1>'+className+'</h1><input type="text" class="url" onclick="this.select()" value="https://docs.phazed.xyz/beatsaber-modding/further-modding/hooks.html?c='+className+'"><br><br>'+text
                })
            }

            main();

            let className1 = getUrlParam('c', 'na');
            console.log(className1)

            if(className1 !== 'na'){
                loadClass(className1);
            }

            function getUrlParam(parameter, defaultValue) {
                const urlParams = new URLSearchParams(window.location.search);
                return urlParams.get(parameter) || defaultValue;
            }
        </script>
    </body>
</html>